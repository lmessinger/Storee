/**
 * State-based routing for AngularJS
 * @version v0.0.2-dev-2013-08-28
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b,c){"use strict";function d(a,b){return x(new(x(function(){},{prototype:a})),b)}function e(a){return w(arguments,function(b){b!==a&&w(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path)if(""!==a.path[d]){if(!b.path[d])break;c.push(a.path[d])}return c}function g(a,b,c,d){var e,g=f(c,d),h={},i=[];for(var j in g)if(g[j].params&&g[j].params.length){e=g[j].params;for(var k in e)i.indexOf(e[k])>=0||(i.push(e[k]),h[e[k]]=a[e[k]])}return x({},h,b)}function h(a,b,c){this.fromConfig=function(a,b,c){return r(a.template)?this.fromString(a.template,b):r(a.templateUrl)?this.fromUrl(a.templateUrl,b):r(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return s(a)?a(b):a},this.fromUrl=function(c,d){return s(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function i(a){function b(b){if(!/^\w+$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(f[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");f[b]=!0,j.push(b)}function c(a){return a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var d,e=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f={},g="^",h=0,i=this.segments=[],j=this.params=[];this.source=a;for(var k,l,m;(d=e.exec(a))&&(k=d[2]||d[3],l=d[4]||("*"==d[1]?".*":"[^/]*"),m=a.substring(h,d.index),!(m.indexOf("?")>=0));)g+=c(m)+"("+l+")",b(k),i.push(m),h=e.lastIndex;m=a.substring(h);var n=m.indexOf("?");if(n>=0){var o=this.sourceSearch=m.substring(n);m=m.substring(0,n),this.sourcePath=a.substring(0,h+n),w(o.substring(1).split(/[&?]/),b)}else this.sourcePath=a,this.sourceSearch="";g+=c(m)+"$",i.push(m),this.regexp=new RegExp(g),this.prefix=i[0]}function j(){this.compile=function(a){return new i(a)},this.isMatcher=function(a){return u(a)&&s(a.exec)&&s(a.format)&&s(a.concat)},this.$get=function(){return this}}function k(a){function b(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function c(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function d(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return r(d)?d:!0}var e=[],f=null;this.rule=function(a){if(!s(a))throw new Error("'rule' must be a function");return e.push(a),this},this.otherwise=function(a){if(t(a)){var b=a;a=function(){return b}}else if(!s(a))throw new Error("'rule' must be a function");return f=a,this},this.when=function(e,f){var g,h=t(f);if(t(e)&&(e=a.compile(e)),!h&&!s(f)&&!v(f))throw new Error("invalid 'handler' in when()");var i={matcher:function(b,c){return h&&(g=a.compile(c),c=["$match",function(a){return g.format(a)}]),x(function(a,e){return d(a,c,b.exec(e.path(),e.search()))},{prefix:t(b.prefix)?b.prefix:""})},regex:function(a,e){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(g=e,e=["$match",function(a){return c(g,a)}]),x(function(b,c){return d(b,e,a.exec(c.path()))},{prefix:b(a)})}},j={matcher:a.isMatcher(e),regex:e instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](e,f));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(a,b,c){function d(){function b(b){var d=b(c,a);return d?(t(d)&&a.replace().url(d),!0):!1}var d,g=e.length;for(d=0;g>d;d++)if(b(e[d]))return;f&&b(f)}return b.$on("$locationChangeSuccess",d),{}}]}function l(a,f,h){function i(a,b){var d=t(a),e=d?a:a.name,f=0===e.indexOf(".")||0===e.indexOf("^");if(f){if(!b)throw new Error("No reference point given for path '"+e+"'");for(var g=e.split("."),h=0,i=g.length,j=b;i>h;h++)if(""!==g[h]||0!==h){if("^"!==g[h])break;if(!j.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");j=j.parent}else j=b;g=g.slice(h).join("."),e=j.name+(j.name&&g?".":"")+g}var k=s[e];return!k||!d&&(d||k!==a&&k.self!==a)?c:k}function j(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!t(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(s[c])throw new Error("State '"+c+"'' is already defined");for(var e in z)b[e]=z[e](b);return s[c]=b,!b["abstract"]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){q.$current.navigable==b&&n(a,c)||q.transitionTo(b,a,!1)}]),b}function k(a,b){return u(a)?b=a:b.name=a,j(b),this}function l(a,b,f,j,k,l){function s(a,c,d,g,h){function i(c,d){w(c,function(c,e){k.push(b.when(t(c)?j.get(c):j.invoke(c,a.self,m)).then(function(a){d[e]=a}))})}var k=[g],l=d?c:o(a.params,c),m={$stateParams:l},n=h.globals={$stateParams:l};return i(a.resolve,n),n.$$state=a,w(a.views,function(c,d){var e=h[d]={$$controller:c.controller};k.push(b.when(f.load(d,{view:c,locals:m,params:l,notify:!1})||"").then(function(a){e.$template=a})),c.resolve!==a.resolve&&i(c.resolve,e)}),b.all(k).then(function(b){return e(h.globals,b[0].globals),w(a.views,function(a,b){e(h[b],h.globals)}),h})}var u=b.reject(new Error("transition superseded")),v=b.reject(new Error("transition prevented"));return q={params:{},current:p.self,$current:p,transition:null},q.go=function(a,b,c){return this.transitionTo(a,b,x({inherit:!0,relative:q.$current},c))},q.transitionTo=function(c,e,f){r(f)||(f=f===!0||f===!1?{location:f}:{}),f=x({location:!0,inherit:!1,relative:null},f);var h=i(c,f.relative);if(!r(h))throw new Error("No such state "+h);if(h["abstract"])throw new Error("Cannot transition to abstract state '"+c+"'");f.inherit&&(e=g(k,e||{},q.$current,h)),c=h;var o,t,w=c.path,z=q.$current,A=q.params,B=z.path,C=p.locals,D=[];for(o=0,t=w[o];t&&t===B[o]&&n(e,A,t.ownParams);o++,t=w[o])C=D[o]=t.locals;if(c===z&&C===z.locals)return q.transition=null,b.when(q.current);e=m(c.params,e||{});var E=a.$broadcast("$stateChangeStart",c.self,e,z.self,A);if(E.defaultPrevented)return v;for(var F=b.when(C),G=o;G<w.length;G++,t=w[G])C=D[G]=d(C),F=s(t,e,t===c,F,C);var H=q.transition=F.then(function(){var b,d,g;if(q.transition!==H)return u;for(b=B.length-1;b>=o;b--)g=B[b],g.self.onExit&&j.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(b=o;b<w.length;b++)d=w[b],d.locals=D[b],d.self.onEnter&&j.invoke(d.self.onEnter,d.self,d.locals.globals);q.$current=c,q.current=c.self,q.params=e,y(q.params,k),q.transition=null;var h=c.navigable;return f.location&&h&&l.url(h.url.format(h.locals.globals.$stateParams)),a.$broadcast("$stateChangeSuccess",c.self,e,z.self,A),q.current},function(d){return q.transition!==H?u:(q.transition=null,a.$broadcast("$stateChangeError",c.self,e,z.self,A,d),b.reject(d))});return H},q.is=function(a){var b=i(a);return r(b)?q.$current===b:c},q.includes=function(a){var b=i(a);return r(b)?r(q.$current.includes[b.name]):c},q.href=function(a,b,c){c=x({lossy:!0,inherit:!1,relative:q.$current},c||{});var d=i(a,c.relative);if(!r(d))return null;b=g(k,b||{},q.$current,d);var e=d&&c.lossy?d.navigable:d,f=e&&e.url?e.url.format(m(d.params,b||{})):null;return!h.html5Mode()&&f?"#"+f:f},q.get=function(a){var b=i(a);return b&&b.self?b.self:null},q}function m(a,b){var c={};return w(a,function(a){var d=b[a];c[a]=null!=d?String(d):null}),c}function n(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function o(a,b){var c={};return w(a,function(a){c[a]=b[a]}),c}var p,q,s={},z={parent:function(a){if(r(a.parent)&&a.parent)return i(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?i(b[1]):p},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=b.extend({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url;if(t(b))return"^"==b.charAt(0)?f.compile(b.substring(1)):(a.parent.navigable||p).url.concat(b);if(f.isMatcher(b)||null==b)return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},params:function(a){if(!a.params)return a.url?a.url.parameters():a.parent.params;if(!v(a.params))throw new Error("Invalid params in state '"+a+"'");if(a.url)throw new Error("Both params and url specicified in state '"+a+"'");return a.params},views:function(a){var b={};return w(r(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},ownParams:function(a){if(!a.parent)return a.params;var b={};w(a.params,function(a){b[a]=!0}),w(a.parent.params,function(c){if(!b[c])throw new Error("Missing required parameter '"+c+"' in state '"+a.name+"'");b[c]=!1});var c=[];return w(b,function(a,b){a&&c.push(b)}),c},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?x({},a.parent.includes):{};return b[a.name]=!0,b}};p=j({name:"",url:"^",views:null,"abstract":!0}),p.locals={globals:{$stateParams:{}}},p.navigable=null,this.state=k,this.$get=l,l.$inject=["$rootScope","$q","$view","$injector","$stateParams","$location","$urlRouter"]}function m(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=x(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function n(a,c,d,e,f){var g;try{g=e.get("$animator")}catch(h){}var i=!1,j={restrict:"ECA",terminal:!0,transclude:!0,compile:function(e,h,k){return function(e,h,l){function m(b){var g=a.$current&&a.$current.locals[p];if(g!==o){var i=t(s&&b);if(i.remove(h),n&&(n.$destroy(),n=null),!g)return o=null,v.state=null,i.restore(k(e),h);o=g,v.state=g.$$state;var j=c(i.populate(g.$template,h));if(n=e.$new(),g.$$controller){g.$scope=n;var l=d(g.$$controller,g);h.children().data("$ngControllerController",l)}j(n),n.$emit("$viewContentLoaded"),q&&n.$eval(q),f()}}var n,o,p=l[j.name]||l.name||"",q=l.onload||"",s=r(g)&&g(e,l),t=function(a){return{"true":{remove:function(a){s.leave(a.contents(),a)},restore:function(a,b){s.enter(a,b)},populate:function(a,c){var d=b.element("<div></div>").html(a).contents();return s.enter(d,c),d}},"false":{remove:function(a){a.html("")},restore:function(a,b){b.append(a)},populate:function(a,b){return b.html(a),b.contents()}}}[a.toString()]};h.append(k(e));var u=h.parent().inheritedData("$uiView");p.indexOf("@")<0&&(p=p+"@"+(u?u.state.name:""));var v={name:p,state:null};h.data("$uiView",v);var w=function(){if(!i){i=!0;try{m(!0)}catch(a){throw i=!1,a}i=!1}};e.$on("$stateChangeSuccess",w),e.$on("$viewContentLoading",w),m(!1)}}};return j}function o(a){var b=a.match(/^([^(]+?)\s*(\((.*)\))?$/);if(!b||4!==b.length)throw new Error("Invalid state ref '"+a+"'");return{state:b[1],paramExpr:b[3]||null}}function p(a){return{restrict:"A",link:function(b,c,d){var e=o(d.uiSref),f=null,g="FORM"===c[0].nodeName,h=g?"action":"href",i=!0,j=function(b){if(b&&(f=b),i){var d=a.href(e.state,f);return d?(c[0][h]=d,void 0):(i=!1,!1)}};e.paramExpr&&(b.$watch(e.paramExpr,function(a,b){a!==b&&j(a)},!0),f=b.$eval(e.paramExpr)),j(),g||c.bind("click",function(c){1!=c.which||c.ctrlKey||c.metaKey||c.shiftKey||(a.go(e.state,f),b.$apply(),c.preventDefault())})}}}function q(a,b){function e(a){this.locals=a.locals.globals,this.params=this.locals.$stateParams}function f(){this.locals=null,this.params=null}function g(c,g){if(null!=g.redirectTo){var h,j=g.redirectTo;if(t(j))h=j;else{if(!s(j))throw new Error("Invalid 'redirectTo' in when()");h=function(a,b){return j(a,b.path(),b.search())}}b.when(c,h)}else a.state(d(g,{parent:null,name:"route:"+encodeURIComponent(c),url:c,onEnter:e,onExit:f}));return i.push(g),this}function h(a,b,d){function e(a){return""!==a.name?a:c}var f={routes:i,params:d,current:c};return b.$on("$stateChangeStart",function(a,c,d,f){b.$broadcast("$routeChangeStart",e(c),e(f))}),b.$on("$stateChangeSuccess",function(a,c,d,g){f.current=e(c),b.$broadcast("$routeChangeSuccess",e(c),e(g)),y(d,f.params)}),b.$on("$stateChangeError",function(a,c,d,f,g,h){b.$broadcast("$routeChangeError",e(c),e(f),h)}),f}var i=[];e.$inject=["$$state"],this.when=g,this.$get=h,h.$inject=["$state","$rootScope","$routeParams"]}var r=b.isDefined,s=b.isFunction,t=b.isString,u=b.isObject,v=b.isArray,w=b.forEach,x=b.extend,y=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),h.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",h),i.prototype.concat=function(a){return new i(this.sourcePath+a+this.sourceSearch)},i.prototype.toString=function(){return this.source},i.prototype.exec=function(a,b){var c=this.regexp.exec(a);if(!c)return null;var d,e=this.params,f=e.length,g=this.segments.length-1,h={};if(g!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(d=0;g>d;d++)h[e[d]]=c[d+1];for(;f>d;d++)h[e[d]]=b[e[d]];return h},i.prototype.parameters=function(){return this.params},i.prototype.format=function(a){var b=this.segments,c=this.params;if(!a)return b.join("");var d,e,f,g=b.length-1,h=c.length,i=b[0];for(d=0;g>d;d++)f=a[c[d]],null!=f&&(i+=encodeURIComponent(f)),i+=b[d+1];for(;h>d;d++)f=a[c[d]],null!=f&&(i+=(e?"&":"?")+c[d]+"="+encodeURIComponent(f),e=!0);return i},b.module("ui.router.util").provider("$urlMatcherFactory",j),k.$inject=["$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",k),l.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",l),m.$inject=[],b.module("ui.router.state").provider("$view",m),n.$inject=["$state","$compile","$controller","$injector","$anchorScroll"],b.module("ui.router.state").directive("uiView",n),p.$inject=["$state"],b.module("ui.router.state").directive("uiSref",p),q.$inject=["$stateProvider","$urlRouterProvider"],b.module("ui.router.compat").provider("$route",q).directive("ngView",n)}(window,window.angular);